(window.webpackJsonpjianghu=window.webpackJsonpjianghu||[]).push([[58],{1649:function(e,t,n){var a=n(1650);"string"===typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(86)(a,r);a.locals&&(e.exports=a.locals)},1650:function(e,t,n){(e.exports=n(85)(!1)).push([e.i,".system-box {\n  width: 100%;\n  height: auto;\n  display: flex;\n}\n.system-box >.left {\n  flex: 3;\n  padding-right: 2rem;\n  box-sizing: border-box;\n}\n.system-box >.left >section {\n  width: 100%;\n  margin-top: 2rem;\n  color: #333;\n  border: 0.1rem solid #eee;\n}\n.system-box >.left >section >h2 {\n  height: 4rem;\n  line-height: 4rem;\n  padding: 0 2rem;\n  font-size: 1.5rem;\n  margin-bottom: 0;\n  background: #f5f6fa;\n  border-left: 0.4rem solid #6d7781;\n}\n.system-box >.left >section >ul {\n  position: relative;\n  margin-bottom: 0;\n}\n.system-box >.left >section >ul >li {\n  position: relative;\n  display: flex;\n  padding: 1rem 2rem;\n  border-top: 0.1rem solid #eee;\n  font-size: 1.3rem;\n}\n.system-box >.left >section >ul >li >.left {\n  color: #999;\n}\n.system-box >.left >section >ul >li >.right {\n  margin-left: 1rem;\n}\n.system-box >.left >section:first-child {\n  margin-top: 0;\n}\n.system-box >.right {\n  flex: 6;\n  padding-left: 2rem;\n}\n.system-box >.right >section {\n  width: 100%;\n  margin-top: 2rem;\n  color: #333;\n}\n.system-box >.right >section:first-child {\n  margin-top: 0;\n}\n.system-box >.right >section.control {\n  width: 100%;\n}\n.system-box >.right >section.control >nav {\n  width: 100%;\n  height: 5rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.system-box >.right >section.control >section {\n  width: 100%;\n  margin-top: 1.5rem;\n  padding: 1.2rem;\n  border: 0.1rem solid #d7dee5;\n  background-color: #fff;\n  box-shadow: 0 0.1rem 0.1rem #ddd;\n}\n.system-box >.right >section.control >section.cpu-box {\n  height: 26rem;\n}\n.system-box >.right >section.control >section.internet-box {\n  height: 32rem;\n}\n.system-box >.right >section.control >section.intranet-box {\n  height: 32rem;\n}\n.system-box >.right >section.base-status {\n  display: flex;\n  padding: 2rem 1.2rem;\n  width: 60%;\n  height: 15rem;\n  border: 0.1rem solid #eee;\n}\n.system-box >.right >section.base-status >.left {\n  height: 100%;\n  flex: 4;\n  max-width: 10rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.3rem;\n}\n.system-box >.right >section.base-status >.left >svg {\n  transform: scale(0.6);\n}\n.system-box >.right >section.base-status >.left >p {\n  position: relative;\n  top: -1rem;\n}\n.system-box >.right >section.base-status >.right {\n  position: relative;\n  height: 100%;\n  flex: 6;\n  font-size: 1.3rem;\n}\n.system-box >.right >section.base-status >.right >ul {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.system-box >.right >section.base-status >.right >ul >li {\n  width: 100%;\n  position: relative;\n}\n",""])},2119:function(e,t,n){"use strict";n.r(t);var a,r=n(6),i=n.n(r),s=(n(100),n(23)),o=n(15),l=n(28),c=n(29),u=n(31),m=n(30),h=n(32),d=(n(1141),n(1139)),p=n(0),f=n.n(p),y=n(38),b=n.n(y),g=n(41),v=n(1085),x=n.n(v),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).echarts=null,n.title="CPU",n.count=0,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.count++,this.count>1&&this._initEcharts(),f.a.createElement("section",{id:"cpu_box",className:"cpu-box"})}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(){e.echarts.resize()})}},{key:"_initEcharts",value:function(){var e=this.props,t=e.cpuX,n=e.cpuY;this.echarts=x.a.init(document.getElementById("cpu_box"));var a={title:{text:this.title},tooltip:{},legend:{data:["CPU\u4f7f\u7528\u7387\uff08%\uff09"]},xAxis:{type:"category",data:t},yAxis:{type:"value"},series:[{name:"CPU\u4f7f\u7528\u7387\uff08%\uff09",data:n,type:"line",color:["#58afed"],itemStyle:{normal:{lineStyle:{width:1}}}}]};this.echarts.setOption(a),this.props.loading?this.echarts.showLoading():this.echarts.hideLoading()}}]),t}(p.Component),w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).echarts=null,n.title="\u7f51\u7edc(\u5916\u7f51)",n.count=0,n.colors=["#58afed","rgb(242, 172, 56)","#675bba"],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.count++,this.count>1&&this._initEcharts(),f.a.createElement("section",{id:"internet_box",className:"internet-box"})}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(){e.echarts.resize()})}},{key:"_initEcharts",value:function(){var e=this.props,t=e.InternetRX,n=e.InternetTX,a=e.InternetX;this.echarts=x.a.init(document.getElementById("internet_box"));var r={color:this.colors,title:{text:this.title},tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{data:["\u51fa\u7f51kbps","\u5165\u7f51kbps"]},grid:{top:70,bottom:50},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:this.colors[1]}},axisPointer:{label:{formatter:function(e){return"\u5165\u7f51kbps  "+e.value+(e.seriesData.length?"\uff1a"+e.seriesData[0].data:"")}}},data:a},{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:this.colors[0]}},axisPointer:{label:{formatter:function(e){return"\u51fa\u7f51kbps  "+e.value+(e.seriesData.length?"\uff1a"+e.seriesData[0].data:"")}}},data:a}],yAxis:[{type:"value"}],series:[{name:"\u51fa\u7f51kbps",type:"line",xAxisIndex:1,smooth:!0,data:n,itemStyle:{normal:{lineStyle:{width:1}}}},{name:"\u5165\u7f51kbps",type:"line",smooth:!0,data:t,itemStyle:{normal:{lineStyle:{width:1}}}}]};this.echarts.setOption(r),this.props.loading?this.echarts.showLoading():this.echarts.hideLoading()}}]),t}(p.Component),E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).echarts=null,n.title="\u7f51\u7edc(\u5185\u7f51)",n.count=0,n.colors=["#58afed","rgb(242, 172, 56)","#675bba"],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.count++,this.count>1&&this._initEcharts(),f.a.createElement("section",{id:"intranet_box",className:"intranet-box"})}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(){e.echarts.resize()})}},{key:"_initEcharts",value:function(){var e=this.props,t=e.IntranetRX,n=e.IntranetTX,a=e.IntranetX;this.echarts=x.a.init(document.getElementById("intranet_box"));var r={color:this.colors,title:{text:this.title},tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{data:["\u51fa\u7f51kbps","\u5165\u7f51kbps"]},grid:{top:70,bottom:50},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:this.colors[1]}},axisPointer:{label:{formatter:function(e){return"\u5165\u7f51kbps  "+e.value+(e.seriesData.length?"\uff1a"+e.seriesData[0].data:"")}}},data:a},{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:this.colors[0]}},axisPointer:{label:{formatter:function(e){return"\u51fa\u7f51kbps  "+e.value+(e.seriesData.length?"\uff1a"+e.seriesData[0].data:"")}}},data:a}],yAxis:[{type:"value"}],series:[{name:"\u51fa\u7f51kbps",type:"line",xAxisIndex:1,smooth:!0,data:n,itemStyle:{normal:{lineStyle:{width:1}}}},{name:"\u5165\u7f51kbps",type:"line",smooth:!0,data:t,itemStyle:{normal:{lineStyle:{width:1}}}}]};this.echarts.setOption(r),this.props.loading?this.echarts.showLoading():this.echarts.hideLoading()}}]),t}(p.Component),T=(n(1649),n(110)),k=d.a.RangePicker;function X(e){return e&&e>b()().endOf("day")}var S=Object(T.a)(a=function(e){function t(e){var n;Object(l.a)(this,t);var a=new Date,r=new Date;return a.setMinutes(r.getMinutes()-60),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).dataChange=function(e,t){var a=n.state,r=a.StartTime,i=a.EndTime;r=t[0],i=t[1],n.setState({StartTime:new Date(r),EndTime:new Date(i)})},n.state={sysTemInfo:{},configurationInfo:{Cpu:{name:"CPU",value:""},Memory:{name:"\u5185\u5b58",value:""},IoOptimized:{name:"\u5b9e\u4f8b\u7c7b\u578b",value:""},OSName:{name:"\u64cd\u4f5c\u7cfb\u7edf",value:""},IpAddress:{name:"\u516c\u7f51IP",value:"",color:!0},PrimaryIpAddress:{name:"\u79c1\u6709IP",value:"",color:!0},InternetChargeType:{name:"\u5e26\u5bbd\u8ba1\u8d39\u65b9\u5f0f",value:""},InternetMaxBandwidthOut:{name:"\u5f53\u524d\u4f7f\u7528\u5e26\u5bbd",value:""},VpcId:{name:"\u4e13\u6709\u7f51\u7edc",value:"",color:!0},VSwitchId:{name:"\u865a\u62df\u4ea4\u6362\u673a",value:"",color:!0}},payInfo:{PayType:{name:"\u4ed8\u8d39\u65b9\u5f0f",value:""},ExpiredTime:{name:"\u5230\u671f\u65f6\u95f4",value:""},AutoType:{name:"\u81ea\u52a8\u7eed\u8d39\uff08\u7eed\u8d39\u5468\u671f\uff09",value:"",color:!0},CreationTime:{name:"\u521b\u5efa\u65f6\u95f4",value:""}},dateFormat:"YYYY/MM/DD HH:mm",StartTime:a,EndTime:r,cpuInfo:[],cpuX:[],cpuY:[],InternetRX:[],InternetTX:[],InternetX:[],IntranetRX:[],IntranetTX:[],IntranetX:[],cpuShow:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.sysTemInfo,a=t.configurationInfo,r=t.payInfo,i=t.dateFormat,s=t.StartTime,o=t.EndTime,l=t.cpuX,c=t.cpuY,u=t.cpuShow,m=t.InternetRX,h=t.InternetTX,d=t.IntranetRX,p=t.IntranetTX,y=t.InternetX,g=t.IntranetX;return f.a.createElement("div",{className:"system-box"},f.a.createElement("div",{className:"left"},f.a.createElement("section",null,f.a.createElement("h2",null,"\u914d\u7f6e\u4fe1\u606f"),f.a.createElement("ul",null,Object.keys(a).map(function(e){return f.a.createElement("li",{key:e},f.a.createElement("div",{className:"left"},a[e].name,"\uff1a"),f.a.createElement("div",{style:a[e].color?{color:"#06C",cursor:"pointer"}:{},className:"right"},a[e].value))}))),f.a.createElement("section",null,f.a.createElement("h2",null,"\u4ed8\u8d39\u4fe1\u606f"),f.a.createElement("ul",null,Object.keys(r).map(function(e){return f.a.createElement("li",{key:e},f.a.createElement("div",{className:"left"},r[e].name,"\uff1a"),f.a.createElement("div",{className:"right"},f.a.createElement("span",{style:r[e].color?{color:"red",cursor:"pointer"}:{}},r[e].value)))})))),f.a.createElement("div",{className:"right"},f.a.createElement("section",{className:"base-status"},f.a.createElement("div",{className:"left"},n.status?f.a.createElement("svg",{t:"1566430361337",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1840",width:"200",height:"200"},f.a.createElement("path",{d:"M512 1024c-281.6 0-512-230.4-512-512s230.4-512 512-512 512 230.4 512 512S793.6 1024 512 1024zM512 57.6C262.4 57.6 57.6 262.4 57.6 512s204.8 454.4 454.4 454.4 454.4-204.8 454.4-454.4S761.6 57.6 512 57.6z","p-id":"1841",fill:"#009900"}),f.a.createElement("path",{d:"M384 332.8 742.4 512 384 691.2Z","p-id":"1842",fill:"#009900"})):f.a.createElement("svg",{t:"1566430361337",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1840",width:"200",height:"200"},f.a.createElement("path",{d:"M512 1024c-281.6 0-512-230.4-512-512s230.4-512 512-512 512 230.4 512 512S793.6 1024 512 1024zM512 57.6C262.4 57.6 57.6 262.4 57.6 512s204.8 454.4 454.4 454.4 454.4-204.8 454.4-454.4S761.6 57.6 512 57.6z","p-id":"1841",fill:"#d81e06"}),f.a.createElement("path",{d:"M384 332.8 742.4 512 384 691.2Z","p-id":"1842",fill:"#d81e06"})),f.a.createElement("p",{style:{color:n.status?"#090":"#d81e06"}},n.status?"\u8fd0\u884c\u4e2d":"\u5df2\u505c\u6b62")),f.a.createElement("div",{className:"right"},f.a.createElement("ul",null,f.a.createElement("li",null,f.a.createElement("span",{style:{color:"#999"}},"\u7f51\u7edc\u7c7b\u578b\uff1a "),n.InstanceNetworkType),f.a.createElement("li",null,f.a.createElement("span",{style:{color:"#999"}},"\u4ed8\u8d39\u65b9\u5f0f\uff1a "),r.PayType.value," ",f.a.createElement("span",{style:{color:"red",cursor:"pointer"}},r.AutoType.value)),f.a.createElement("li",null,f.a.createElement("span",{style:{color:"#999"}},"\u5230\u671f\u65f6\u95f4\uff1a "),r.ExpiredTime.value)))),f.a.createElement("section",{className:"control"},f.a.createElement("nav",null,f.a.createElement("span",null,"\u76d1\u63a7\u4fe1\u606f"),f.a.createElement(k,{showTime:!0,defaultValue:[b()(s,i),b()(o,i)],disabledDate:X,format:i,onChange:this.dataChange,onOk:function(){return e._reqCpuData()}})),f.a.createElement(I,{cpuX:l,cpuY:c,loading:!u}),f.a.createElement(w,{InternetX:y,title:"\u7f51\u7edc(\u5916\u7f51)",InternetRX:m,InternetTX:h,loading:!u}),f.a.createElement(E,{IntranetX:g,IntranetRX:d,IntranetTX:p,loading:!u}))))}},{key:"componentDidMount",value:function(){this._reqSystemInfo(),this._reqCpuData()}},{key:"_reqCpuData",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t,n,a,r,o,l,c,u,m,h,d,p,f,y,v,x;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.StartTime,a=t.EndTime,r=t.dateFormat,o=t.cpuX,l=t.cpuY,c=t.InternetRX,u=t.InternetTX,m=t.IntranetRX,h=t.IntranetTX,d=t.InternetX,p=t.IntranetX,f=b()(a).diff(b()(n),"hour"),y=60,!(f<=6)){e.next=7;break}y=60,e.next=16;break;case 7:if(!(f<=24)){e.next=11;break}y=600,e.next=16;break;case 11:if(!(f<360)){e.next=15;break}y=3600,e.next=16;break;case 15:return e.abrupt("return",s.a.warning("\u67e5\u8be2\u95f4\u9694\u65e5\u671f\u4e0d\u5f97\u8d85\u8fc715\u5929"));case 16:return this.setState({cpuShow:!1}),l=[],o=[],c=[],u=[],d=[],m=[],h=[],p=[],e.next=27,Object(g.N)({StartTime:b()(n).format(r),EndTime:b()(a).format(r),Period:y});case 27:200===(v=e.sent).code?((x=v.result.MonitorData.InstanceMonitorData).forEach(function(e){var t=b()(e.TimeStamp).format(r);e.CPU&&(o.push(t),l.push(e.CPU)),e.InternetRX&&e.InternetTX&&(c.push(e.InternetRX),u.push(e.InternetTX),d.push(t)),e.IntranetRX&&e.IntranetTX&&(m.push(e.IntranetRX),h.push(e.IntranetTX),p.push(t))}),this.setState({cpuInfo:x,cpuY:l,cpuX:o,InternetRX:c,InternetTX:u,IntranetRX:m,IntranetTX:h,InternetX:d,IntranetX:p,cpuShow:!0})):s.a.warning(v.data);case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_reqSystemInfo",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t,n,a,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.db)();case 2:200===(t=e.sent).code?(n=this.state,a=n.sysTemInfo,r=n.configurationInfo,o=n.payInfo,a=t.result.Instances.Instance[0],r.Cpu.value=a.Cpu+"\u6838",r.Memory.value=a.Memory/1024+"GiB",r.IoOptimized.value=a.IoOptimized?" I/O\u4f18\u5316":"\u975eI/O\u4f18\u5316",r.OSName.value=a.OSName,r.IpAddress.value=a.PublicIpAddress.IpAddress[0],r.PrimaryIpAddress.value=a.NetworkInterfaces.NetworkInterface[0].PrimaryIpAddress,r.InternetChargeType.value="PayByBandwidth"===a.InternetChargeType?"\u6309\u5e26\u5bbd\u8ba1\u8d39":"\u6309\u6d41\u91cf\u8ba1\u8d39",r.InternetMaxBandwidthOut.value=a.InternetMaxBandwidthOut+"Mbps",r.VpcId.value=a.VpcAttributes.VpcId,r.VSwitchId.value=a.VpcAttributes.VSwitchId,o.PayType.value="\u5305\u5e74\u5305\u6708",o.AutoType.value="(\u624b\u52a8\u7eed\u8d39)",o.ExpiredTime.value=b()(a.ExpiredTime).format("YYYY-MM-DD HH:mm:ss")+" \u5230\u671f",o.CreationTime.value=b()(a.CreationTime).format("YYYY-MM-DD HH:mm:ss"),a.InstanceNetworkType="vpc"===String(a.InstanceNetworkType).toLowerCase()?"\u4e13\u6709\u7f51\u7edc":"\u7ecf\u5178\u7f51\u7edc",a.status="running"===String(a.Status).toLowerCase(),this.setState({sysTemInfo:a,configurationInfo:r,payInfo:o})):s.a.warning(t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(p.Component))||a;t.default=S}}]);